!function(e){e.fn.columnFilter=function(t){function a(e,t,a,n,r){if(void 0===t)return new Array;void 0===a&&(a=!0),void 0===n&&(n=!0),void 0===r&&(r=!0);var l;l=1==n?e.aiDisplay:e.aiDisplayMaster;for(var i=new Array,s=0,o=l.length;s<o;s++){var c=l[s],u=S.fnGetData(c)[t];1==r&&0==u.length||(1==a&&jQuery.inArray(u,i)>-1||i.push(u))}return i.sort()}function n(e){return w.bUseColVis?e:S.fnSettings().oApi._fnVisibleToColumnIndex(S.fnSettings(),e)}function r(t,a,r,l,i,s){var o="text_filter";l&&(o="number_filter"),g=g.replace(/(^\s*)|(\s*$)/g,"");var c=t.fnSettings().aoPreSearchCols[p].sSearch,u="search_init ",f="";""!=c&&"^"!=c&&(f=l&&"^"==c.charAt(0)?c.substr(1):c,u="");var d=e('<input type="text" class="'+u+o+'" value="'+f+'" rel="'+p+'"/>');void 0!=s&&-1!=s&&d.attr("maxlength",s),v.html(d),l?v.wrapInner('<span class="filter_column filter_number" />'):v.wrapInner('<span class="filter_column filter_text" />'),h[p]=g;var m=p;l&&!t.fnSettings().oFeatures.bServerSide?d.typeWatch({wait:w.iFilteringDelay,captureLength:0,callback:function(e){t.fnFilter("^"+this.value,n(m),!0,!1),k()}}):d.typeWatch({wait:w.iFilteringDelay,captureLength:0,callback:function(l){if(t.fnSettings().oFeatures.bServerSide&&0!=i){t.fnSettings().aoPreSearchCols[m].sSearch;var s=e(this).data("dt-iLastFilterLength");void 0===s&&(s=0);var o=this.value.length;if(Math.abs(o-s)<i)return;e(this).data("dt-iLastFilterLength",o)}t.fnFilter(this.value,n(m),a,r),k()}}),d.focus(function(){e(this).hasClass("search_init")&&(e(this).removeClass("search_init"),this.value="")}),d.blur(function(){""==this.value&&(e(this).addClass("search_init"),this.value=h[m])})}function l(t){var a=t.fnSettings().aoPreSearchCols[p].sSearch,r="",l="";if(""!=a&&"undefined"!=a){var i=a.split(w.sRangeSeparator);r="undefined"!=i[0]?i[0]:"",l="undefined"!=i[1]?i[1]:""}v.html(d(0));var s=t.attr("id")+"_range_from_"+p,o=e('<input type="text" class="number_range_filter" id="'+s+'" rel="'+p+'" value="'+r+'"/>');v.append(o),v.append(d(1));var c=t.attr("id")+"_range_to_"+p,u=e('<input type="text" class="number_range_filter" id="'+c+'" rel="'+p+'" value="'+l+'"/>');v.append(u),v.append(d(2)),v.wrapInner('<span class="filter_column filter_number_range" />');var f=p;_.push(p),t.dataTableExt.afnFiltering.push(function(e,a,r){if(t.attr("id")!=e.sTableId)return!0;if(null==document.getElementById(s))return!0;var l=1*document.getElementById(s).value,i=1*document.getElementById(c).value,o="-"==a[n(f)]?0:1*a[n(f)];return""==l&&""==i||(""==l&&o<=i||(l<=o&&""==i||l<=o&&o<=i))}),e("#"+s+",#"+c,v).typeWatch({wait:w.iFilteringDelay,captureLength:0,callback:function(e){var a=1*document.getElementById(s).value,n=1*document.getElementById(c).value;0!=a&&0!=n&&a>n||(t.fnDraw(),k())}})}function i(t){var a=t.fnSettings().aoPreSearchCols[p].sSearch,r="",l="";if(""!=a&&"undefined"!=a){var i=a.split(w.sRangeSeparator);r="undefined"!=i[0]?i[0]:"",l="undefined"!=i[1]?i[1]:""}var s=m.split(/[}{]/);v.html("");var o=t.attr("id")+"_range_from_"+p,c=e('<input type="text" class="date_range_filter" id="'+o+'" rel="'+p+'" value="'+r+'" readonly="true"/>');c.datepicker();var u=t.attr("id")+"_range_to_"+p,f=e('<input type="text" class="date_range_filter" id="'+u+'" rel="'+p+'" value="'+l+'" readonly="true"/>');for(ti=0;ti<s.length;ti++)s[ti]==w.sDateFromToken?v.append(c):s[ti]==w.sDateToToken?v.append(f):v.append(s[ti]);v.wrapInner('<span class="filter_column filter_date_range" />'),f.datepicker();var d=p;_.push(p),t.dataTableExt.afnFiltering.push(function(a,r,l){if(t.attr("id")!=a.sTableId)return!0;var i=c.datepicker("getDate"),s=f.datepicker("getDate");if(null==i&&null==s)return!0;var o=null;try{if(null==r[n(d)]||""==r[n(d)])return!1;o=e.datepicker.parseDate(e.datepicker.regional[""].dateFormat,r[n(d)])}catch(e){return!1}return null!=o&&(null==i&&o<=s||(i<=o&&null==s||i<=o&&o<=s))}),e("#"+o+",#"+u,v).change(function(){t.fnDraw(),k()})}function s(t,n,r,l,i,s,o,u){null==n&&(n=a(t.fnSettings(),r,!0,!1,!0));var f=r,d=t.fnSettings().aoPreSearchCols[p].sSearch;null!=d&&""!=d||(d=o);var h='<select class="search_init select_filter" rel="'+p+'"><option value="" class="search_init">'+i+"</option>";u&&(h='<select class="search_init select_filter" rel="'+p+'" multiple>'),h='<select class="search_init select_filter" rel="'+p+'">';var g=0,v=n.length;for(g=0;g<v;g++)if("object"!=typeof n[g]){m="";escape(n[g])!=d&&escape(n[g])!=escape(d)||(m="selected "),h+="<option "+m+' value="'+escape(n[g])+'">'+n[g]+"</option>"}else{var m="";s?(n[g].value==d&&(m="selected "),h+="<option "+m+'value="'+n[g].value+'">'+n[g].label+"</option>"):(escape(n[g].value)==d&&(m="selected "),h+="<option "+m+'value="'+escape(n[g].value)+'">'+n[g].label+"</option>")}var b=e(h+"</select>");l.html(b),l.wrapInner('<span class="filter_column filter_select" />'),u?b.change(function(){""!=e(this).val()?e(this).removeClass("search_init"):e(this).addClass("search_init");var a=e(this).val(),n=[];if(null==a||a==[])r="^(.*)$";else{e.each(a,function(e,t){n.push(c(t))});var r="^("+n.join("|")+")$"}t.fnFilter(r,f,!0,!1)}):b.change(function(){""!=e(this).val()?e(this).removeClass("search_init"):e(this).addClass("search_init"),s?t.fnFilter(e(this).val(),r,s):t.fnFilter(unescape(e(this).val()),r),k()})}function o(e,t,a,r,l){var i=e.fnSettings();null!=t&&"function"!=typeof t||""==i.sAjaxSource||i.oFeatures.bServerSide||i.aoDrawCallback.push({fn:function(i,o,c){return function(u){if(2==u.iDraw&&null!=u.sAjaxSource&&""!=u.sAjaxSource&&!u.oFeatures.bServerSide)return s(e,t&&t(u.aoData,u),n(i),o,c,a,r,l)}}(p,v,g),sName:"column_filter_"+p}),s(e,"function"==typeof t?null:t,n(p),v,g,a,r,l)}function c(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}function u(t){var a,n=p,r='<div class="dropdown select_filter"><a class="dropdown-toggle" data-toggle="dropdown" href="#">'+g+'<b class="caret"></b></a><ul class="dropdown-menu" role="menu"><li data-value=""><a>Show All</a></li>',l=t.length;for(a=0;a<l;a++)r+='<li data-value="'+t[a]+'"><a>'+t[a]+"</a></li>";var i=e(r+"</ul></div>");v.html(i),v.wrapInner('<span class="filterColumn filter_select" />'),i.find("li").click(function(){S.fnFilter(e(this).data("value"),n)})}function f(t,n){null==n&&(n=a(t.fnSettings(),p,!0,!0,!0));var r,l=p,i="",s=n.length,o=g.replace("%","Perc").replace("&","AND").replace("$","DOL").replace("Â£","STERL").replace("@","AT").replace(/\s/g,"_");o=o.replace(/[^a-zA-Z 0-9]+/g,"");var c=g;null==w.sFilterButtonText&&void 0==w.sFilterButtonText||(c=w.sFilterButtonText);var u=Math.floor(s/12);s%12>0&&(u+=1);var f=100/u-2,d=10*u;1==u&&(f=20);var h='<div style="float:left; min-width: '+f+'%; " >',m=t.attr("id")+o,b="chkBtnOpen"+m,_=m+"-flt-toggle";for(i+='<button id="'+b+'" class="checkbox_filter btn btn-default" > '+c+"</button>",i+='<div id="'+_+'" title="'+g+'" rel="'+p+'" class="toggle-check ui-widget-content ui-corner-all"  style="width: '+d+'%; " >',i+=h,r=0;r<s;r++){r%12==0&&0!=r&&(i+="</div>"+h);var S=n[r],x=n[r];"object"==typeof n[r]&&(S=n[r].label,x=n[r].value);var y=e(i+='<input class="search_init checkbox_filter btn btn-default" type="checkbox" id= "'+m+"_cb_"+x+'" name= "'+o+'" value="'+x+'" >'+S+"<br/>");v.html(y),v.wrapInner('<span class="filter_column filter_checkbox" />'),y.change(function(){var a="",n="|",r=e('input:checkbox[name="'+o+'"]:checked').size();e('input:checkbox[name="'+o+'"]:checked').each(function(t){(0==t&&1==r||0!=t&&t==r-1)&&(n=""),a=a.replace(/^\s+|\s+$/g,""),a=a+e(this).val()+n,n="|"}),""!=a?e('input:checkbox[name="'+o+'"]').removeClass("search_init"):e('input:checkbox[name="'+o+'"]').addClass("search_init"),t.fnFilter(a,l,!0,!1),k()})}e("#"+b).button(),e("#"+_).dialog({autoOpen:!1,hide:"blind",buttons:[{text:"Reset",click:function(){return e('input:checkbox[name="'+o+'"]:checked').each(function(t){e(this).attr("checked",!1),e(this).addClass("search_init")}),t.fnFilter("",l,!0,!1),k(),!1}},{text:"Close",click:function(){e(this).dialog("close")}}]}),e("#"+b).click(function(){e("#"+_).dialog("open");var t=e(this);return e("#"+_).dialog("widget").position({my:"top",at:"bottom",of:t}),!1});var F=k;k=function(){var t=e("#"+b);e("#"+_).dialog("widget").position({my:"top",at:"bottom",of:t}),F()}}function d(e){switch(e){case 0:return m.substring(0,m.indexOf("{from}"));case 1:return m.substring(m.indexOf("{from}")+6,m.indexOf("{to}"));default:return m.substring(m.indexOf("{to}")+4)}}var h,p,g,v,m="From {from} to {to}",b=new Array,_=new Array,k=function(){},S=this,x={sPlaceHolder:"foot",sRangeSeparator:"~",iFilteringDelay:750,aoColumns:null,sRangeFormat:"From {from} to {to}",sDateFromToken:"from",sDateToToken:"to"},w=e.extend(x,t);return this.each(function(){if(S.fnSettings().oFeatures.bFilter){h=new Array;var t=S.fnSettings().aoFooter[0];S.fnSettings().nTFoot;if("head:after"==w.sPlaceHolder){var a=e("tr:first",S.fnSettings().nTHead).detach();S.fnSettings().bSortCellsTop?(a.prependTo(e(S.fnSettings().nTHead)),t=S.fnSettings().aoHeader[1]):(a.appendTo(e(S.fnSettings().nTHead)),t=S.fnSettings().aoHeader[0]),"tr:last",S.fnSettings().nTHead}else"head:before"==w.sPlaceHolder&&(S.fnSettings().bSortCellsTop?((a=e("tr:first",S.fnSettings().nTHead).detach()).appendTo(e(S.fnSettings().nTHead)),t=S.fnSettings().aoHeader[1]):t=S.fnSettings().aoHeader[0],"tr:first",S.fnSettings().nTHead);for(e(t).each(function(t){p=t;var a={type:"text",bRegex:!1,bSmart:!0,iMaxLenght:-1,iFilterLength:0};if(null!=w.aoColumns){if(w.aoColumns.length<p||null==w.aoColumns[p])return;a=w.aoColumns[p]}if(g=e(e(this)[0].cell).text(),null==a.sSelector?v=e(e(this)[0].cell):0==(v=e(a.sSelector)).length&&(v=e(e(this)[0].cell)),null!=a)switch(m=null!=a.sRangeFormat?a.sRangeFormat:w.sRangeFormat,a.type){case"null":break;case"number":r(S,!0,!1,!0,a.iFilterLength,a.iMaxLenght);break;case"select":1!=a.bRegex&&(a.bRegex=!1),o(S,a.values,a.bRegex,a.selected,a.multiple);break;case"number-range":l(S);break;case"date-range":i(S);break;case"checkbox":f(S,a.values);break;case"twitter-dropdown":case"dropdown":u(a.values);break;case"text":default:bRegex=null!=a.bRegex&&a.bRegex,bSmart=null!=a.bSmart&&a.bSmart,r(S,bRegex,bSmart,!1,a.iFilterLength,a.iMaxLenght)}}),j=0;j<_.length;j++){var n=function(){var t=S.attr("id");return e("#"+t+"_range_from_"+_[j]).val()+w.sRangeSeparator+e("#"+t+"_range_to_"+_[j]).val()};b.push(n)}S.api().settings().context[0].bAjaxDataGet&&e(S[0]).on("preXhr.dt",function(e,t,a){for(j=0;j<_.length;j++){var n=_[j],r=b[j]();r==="undefined"+w.sRangeSeparator+"undefined"&&(r=S.fnSettings().aoPreSearchCols[n].sSearch),!0===a.columns[n].searchable&&(a.columns[n].search.value=r,S.fnSettings().aoPreSearchCols[n].sSearch=r)}a.rangeSeparator=w.sRangeSeparator})}})}}(jQuery);
